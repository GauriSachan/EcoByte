<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Feedback</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #dfffe3; /* A slightly darker background to make the bokeh circles stand out */
            overflow: hidden; /* Prevents scrollbars from the floating elements */
        }

        /* Modal Backdrop */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 50;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-backdrop.show {
            display: flex;
            opacity: 1;
        }
        
        /* Modal Container */
        .modal-container {
            background-color: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }

        .modal-backdrop.show .modal-container {
            transform: scale(1);
        }

        /* Star Rating */
        .star-rating {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .star-rating svg {
            color: #d1d5db; /* Default gray color */
            transition: color 0.2s ease;
        }
        
        .star-rating svg.active,
        .star-rating svg.hover-active {
            color: #fbbf24; /* Yellow color for active/hovered stars */
        }

        /* Bokeh Effect CSS */
        #bokehBackground {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none; /* Allows clicks to pass through to elements underneath */
        }

        .bokeh-circle {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            filter: blur(20px);
            opacity: 0;
            animation: float 25s infinite ease-in-out;
        }
        
        .bokeh-circle:nth-child(1) { top: 10%; left: 20%; width: 150px; height: 150px; background-color: rgba(181, 230, 29, 0.3); animation-delay: 2s; }
        .bokeh-circle:nth-child(2) { top: 50%; left: 70%; width: 200px; height: 200px; animation-delay: 5s; }
        .bokeh-circle:nth-child(3) { top: 80%; left: 40%; width: 120px; height: 120px; background-color: rgba(255, 255, 204, 0.4); animation-delay: 8s; }
        .bokeh-circle:nth-child(4) { top: 30%; left: 85%; width: 180px; height: 180px; background-color: rgba(181, 230, 29, 0.2); animation-delay: 10s; }
        .bokeh-circle:nth-child(5) { top: 0%; left: 50%; width: 100px; height: 100px; animation-delay: 12s; }
        .bokeh-circle:nth-child(6) { top: 60%; left: 15%; width: 170px; height: 170px; background-color: rgba(255, 255, 204, 0.3); animation-delay: 15s; }
        .bokeh-circle:nth-child(7) { top: 20%; left: 60%; width: 140px; height: 140px; animation-delay: 18s; }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            50% { transform: translateY(-50vh) rotate(180deg); opacity: 0.6; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body class="text-gray-800 antialiased p-8">

    <!-- Bokeh Background -->
    <div id="bokehBackground">
        <div class="bokeh-circle"></div>
        <div class="bokeh-circle"></div>
        <div class="bokeh-circle"></div>
        <div class="bokeh-circle"></div>
        <div class="bokeh-circle"></div>
        <div class="bokeh-circle"></div>
        <div class="bokeh-circle"></div>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto max-w-2xl text-center py-20 relative z-10">
        <h1 class="text-4xl md:text-5xl font-extrabold text-[#14603e] mb-4">Your Feedback Matters</h1>
        <p class="text-lg text-gray-600 mb-8">
            Help us improve our service by providing your valuable feedback. Click the button below to share your thoughts.
        </p>
        <button id="openModalBtn" class="bg-[#28a745] text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-[#218838] transform transition-transform hover:scale-105">
            Give Feedback
        </button>
    </div>

    <!-- Modal Backdrop -->
    <div id="feedbackModal" class="modal-backdrop z-20">
        <!-- Modal Container -->
        <div class="modal-container p-6 md:p-8">
            <!-- Modal Header -->
            <div class="flex justify-between items-center pb-4 border-b border-gray-200">
                <h2 class="text-2xl font-bold text-[#14603e]">Submit Feedback</h2>
                <button id="closeModalBtn" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Modal Body (Form) -->
            <div class="py-6">
                <form id="feedbackForm">
                    <div class="mb-6">
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="rating">
                            Your Rating
                        </label>
                        <div id="starRating" class="star-rating">
                            <!-- Star SVGs (5 stars) -->
                            <svg data-rating="1" class="h-10 w-10" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27l6.18 3.73-1.64-7.03 5.46-4.73-7.19-.62-2.81-6.6-2.81 6.6-7.19.62 5.46 4.73-1.64 7.03z"/></svg>
                            <svg data-rating="2" class="h-10 w-10" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27l6.18 3.73-1.64-7.03 5.46-4.73-7.19-.62-2.81-6.6-2.81 6.6-7.19.62 5.46 4.73-1.64 7.03z"/></svg>
                            <svg data-rating="3" class="h-10 w-10" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27l6.18 3.73-1.64-7.03 5.46-4.73-7.19-.62-2.81-6.6-2.81 6.6-7.19.62 5.46 4.73-1.64 7.03z"/></svg>
                            <svg data-rating="4" class="h-10 w-10" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27l6.18 3.73-1.64-7.03 5.46-4.73-7.19-.62-2.81-6.6-2.81 6.6-7.19.62 5.46 4.73-1.64 7.03z"/></svg>
                            <svg data-rating="5" class="h-10 w-10" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27l6.18 3.73-1.64-7.03 5.46-4.73-7.19-.62-2.81-6.6-2.81 6.6-7.19.62 5.46 4.73-1.64 7.03z"/></svg>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-700 text-sm font-semibold mb-2" for="feedback">
                            Your Comments
                        </label>
                        <textarea id="feedback" rows="4" class="block w-full px-4 py-3 rounded-xl border border-gray-300 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4caf50] focus:border-[#4caf50] transition-colors" placeholder="Tell us what you think..."></textarea>
                    </div>

                    <div class="flex justify-end gap-3">
                        <button type="button" id="cancelBtn" class="bg-gray-200 text-gray-700 font-bold py-2 px-6 rounded-full hover:bg-gray-300 transition-colors">
                            Cancel
                        </button>
                        <button type="submit" class="bg-[#28a745] text-white font-bold py-2 px-6 rounded-full shadow-md hover:bg-[#218838] transition-colors">
                            Submit
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Custom Message Box (for a better UX than alert) -->
    <div id="messageBox" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-xl shadow-2xl z-[100] scale-0 opacity-0 transition-all duration-300">
        <h3 id="messageTitle" class="text-xl font-bold mb-2 text-[#14603e]"></h3>
        <p id="messageText" class="text-gray-600 mb-4"></p>
        <div class="flex justify-end">
            <button id="messageOkBtn" class="bg-[#28a745] text-white font-bold py-2 px-4 rounded-full hover:bg-[#218838]">OK</button>
        </div>
    </div>
    

    <script>
        const openModalBtn = document.getElementById('openModalBtn');
        const feedbackModal = document.getElementById('feedbackModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const feedbackForm = document.getElementById('feedbackForm');
        const starRatingContainer = document.getElementById('starRating');
        const stars = starRatingContainer.querySelectorAll('svg');
        const messageBox = document.getElementById('messageBox');
        const messageTitle = document.getElementById('messageTitle');
        const messageText = document.getElementById('messageText');
        const messageOkBtn = document.getElementById('messageOkBtn');

        let selectedRating = 0;

        // Function to show a custom message box
        function showMessage(title, message) {
            messageTitle.textContent = title;
            messageText.textContent = message;
            messageBox.classList.add('scale-100', 'opacity-100');
            feedbackModal.classList.remove('show');
        }

        function hideMessage() {
            messageBox.classList.remove('scale-100', 'opacity-100');
        }

        messageOkBtn.addEventListener('click', hideMessage);

        // Open/Close Modal Handlers
        function openModal() {
            feedbackModal.classList.add('show');
            resetForm();
        }

        function closeModal() {
            feedbackModal.classList.remove('show');
        }

        openModalBtn.addEventListener('click', openModal);
        closeModalBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        feedbackModal.addEventListener('click', (e) => {
            if (e.target.id === 'feedbackModal') {
                closeModal();
            }
        });

        // Star Rating Logic
        stars.forEach(star => {
            star.addEventListener('click', () => {
                selectedRating = parseInt(star.dataset.rating);
                updateStars(selectedRating);
            });

            star.addEventListener('mouseenter', () => {
                const hoverRating = parseInt(star.dataset.rating);
                updateStars(hoverRating, 'hover-active');
            });

            star.addEventListener('mouseleave', () => {
                updateStars(selectedRating);
            });
        });

        function updateStars(rating, className = 'active') {
            stars.forEach(star => {
                const starRating = parseInt(star.dataset.rating);
                star.classList.remove('active', 'hover-active');
                if (starRating <= rating) {
                    star.classList.add(className);
                }
            });
        }
        
        // Form Submission
        feedbackForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const feedbackText = document.getElementById('feedback').value;
            
            if (selectedRating === 0 || feedbackText.trim() === '') {
                showMessage("Incomplete Form", "Please provide a rating and your comments before submitting.");
                return;
            }

            // Here, you would send data to a server or Firestore
            console.log("Submitting feedback:", {
                rating: selectedRating,
                feedback: feedbackText
            });

            // Simulate successful submission
            showMessage("Thank You!", "Your feedback has been submitted successfully.");
            closeModal();
            
            // Reset the form after submission
            resetForm();
        });

        function resetForm() {
            selectedRating = 0;
            updateStars(0);
            feedbackForm.reset();
        }
    </script>
</body>
</html>